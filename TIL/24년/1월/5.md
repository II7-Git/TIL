# 24.01.05 TIL

## Unreal Engine

그랩 기능을 구현하기 시작했고 플레이어 앞에 공간 콜리전를 두어서 해당 공간에서 특정 물건을 집게하는 방식으로 TPS에서도 적절히 동작할 수 있는 기능을 구현하려 했는데 몇가지 동작에서 걸리는 알고리즘이 있어서 좀 더 고민하고 연구해보았다.

첫째로 문제는 공간 콜리전 내에 잡을 물체가 여러개일 때 원하는 특정 물건을 집게하는 방법을 고안해야 해서 일단 공간 콜리전 내에 플레이어 에임에서 가장 가까운 or 에임에 트레이스를 쏴서 충돌된 첫번째 물건을 그랩할 수 있게 하는 방식이면 제대로 동작할 수 있을 것이라고 생각돼서 이 방법으로 구현하려했다.

그래서 기존 CryptRaider의 Grabber 코드를 응용해서 구현하려 했는데 Grabber 코드는 다양한 기능을 사용해보기 위해 플레이어에게서 독립적인 코드로 구성돼있었고 블루프린트에서 작업을 한 부분도 있었기에 이를 플레이어에 귀속시키는 메소드로 변환하고 되도록 기능을 C++코드로 작업하고 싶었기에 필요한 기능을 알아내는 작업이 필요했다. 그래서 이를 위해 코드가 제대로 어떤 기능을 하는지 코드를 분석하여 필요한 기능을 추려내었다.

그리고 이를 바탕으로 TPSCharacter를 상속받은 GrabTestCharacter를 만들어서 Grab기능을 플레이어에 부속적인 기능으로 만들어서 구현을 시작했다. 일단 콜리전을 얻어서 충돌된 객체들의 리스트를 가져와서 이를 Grab하는 기능을 1차적인 개발 목적으로 삼고 구현을 시작하였다.
